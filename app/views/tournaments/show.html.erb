<h2 style="text-align: center;"> <%= @tournament.name %></h2>

<hr>
<% if @tournament.mode == "Swiss_System" %>
	<div class="row">
	  <% if @rounds.blank? %>
	  	<div class="pending-start">
		  	<% if user_signed_in? && current_user == @tournament.user  %>	
		  		 <%= render "round_one" %>
		  	<% else %>
		  		<h3>Tournament has not started Yet </h3>
		  	<% end %>
	  	</div>
	  <% else %>	
	  	<% if user_signed_in? && current_user == @tournament.user  %>
	  		<% if !@tournament.completed %>
	  			
			  	<% if !@playings.blank? %>
			  		<h4 style="text-align: center;">Games Underway</h4>
			  	<% else %>
			  		<p="text-align: center;"> <%= render "round" %></p>
			  	<% end %>
	  		<% end %>
	  	<% end %>

	  	<% if @tournament.completed %>
	  		<% if @playing.blank? %>
	  			<h4 style="text-align: center;">Tournament Ended!</h4>
	  		<% else %>
	  			<h4 style="text-align: center;">Games Still being played</h4>
	  		<% end %>
	  	<% end %>	

			<div class="row"><%= will_paginate @rounds, :page_links => false   %></div>
			<% @rounds.each do |round| %>

		    <p id="versus-header"><%= round.name %></p>
		    <% round.pairs.each do |pair| %>
		    	<% unless round.pairs.blank? %>
		  			<% @home = @teams.where(id: pair.home).first %>
		  			<% @away = @teams.where(id: pair.away).first %>
			      	<% unless @home.blank? || @home.blank? %>	
			      		<% if user_signed_in? && current_user == @tournament.user %>	      	
				      		<%= link_to edit_pair_path(pair) do %>
										<div class="row match">
											<div class="col-xs-5 home">
												<p id="team_home"><%= @home.name %></p>
											</div>
											<div class="col-xs-2 versus">
							      		<span>
							      			<%= pair.score_home %>	
							      					-
							      			<%= pair.score_away %>
							      		</span>
											</div>
											<div class="col-xs-5 away">
												<p id="team_away">
													<span><%= @away.name %></span>
												</p>
											</div>
										</div>
									<% end %>
								<% else %>
									<div class="row match">
										<div class="col-xs-5 home">
											<p id="team_home"><%= @home.name %></p>
										</div>
										<div class="col-xs-2 versus">
						      		<span>
						      			<%= pair.score_home %>	
						      					-
						      			<%= pair.score_away %>
						      		</span>
										</div>
										<div class="col-xs-5 away">
											<p id="team_away">
												<span><%= @away.name %></span>
											</p>
										</div>
									</div>						
								<% end %>
			        <% end %>					    
		      <% end %>
		    <% end %>
			<% end %>
	  <% end %>	
	</div>

<% else %>
	<div class="row">
	  <% if @rounds.blank? %>
	  	<div class="pending-start">
		  	<% if user_signed_in? && current_user == @tournament.user  %>	
		  		<h2><p="text-align: center;"> <%= render "round_one" %></p></h2>
		  	<% else %>
		  		<h4 style="text-align: center;">This Tournament has not started Yet </h4>
		  	<% end %>
	  	</div>
	  <% else %>	
	  	<% if user_signed_in? && current_user == @tournament.user  %>
	  		<% if !@tournament.completed %>
	  			
			  	<% if !@playings.blank? %>
			  		<h4 style="text-align: center;">Games Underway</h4>
			  	<% else %>
			  		<p="text-align: center;"> <%= render "round" %></p>
			  	<% end %>
	  		<% end %>
	  	<% end %>


	  	<div class="row"><%= will_paginate @rounds, :page_links => false   %></div>
			

			<% @rounds.each do |round| %>
		    <p id="versus-header"><%= round.name %></p>
		    <% round.pairs.each do |pair| %>
		    	<% unless round.pairs.blank? %>
		  			<% @home = @teams.where(id: pair.home).first %>
		  			<% @away = @teams.where(id: pair.away).first %>
			      	<% unless @home.blank? || @home.blank? %>	
			      		<% if user_signed_in? && current_user == @tournament.user %>	      	
				      		<%= link_to edit_pair_path(pair) do %>
										<div class="row match">
											<div class="col-xs-5 home">
												
												<p id="team_home">

														<%= @home.name %>

												</p>
											</div>
											<div class="col-xs-2 versus">
							      		<span>
							      			<%= pair.score_home %>	
							      					-
							      			<%= pair.score_away %>
							      		</span>
											</div>
											<div class="col-xs-5 away">
												<p id="team_away">

														<%= @away.name %>
						
												</p>
											</div>
										</div>
									<% end %>
								<% else %>
									<div class="row match">
										<div class="col-xs-5 home">
											<p id="team_home"><%= @home.name %></p>
										</div>
										<div class="col-xs-2 versus">
						      		<span>
						      			<%= pair.score_home %>	
						      					-
						      			<%= pair.score_away %>
						      		</span>
										</div>
										<div class="col-xs-5 away">
											<p id="team_away">
												<span><%= @away.name %></span>
											</p>
										</div>
									</div>						
								<% end %>
			        <% end %>					    
		      <% end %>
		    <% end %>
			<% end %>
	  <% end %>	
	</div>
<% end %>




<div class="row log-table">
	<hr style="height:2px;border:none;color:#333;background-color:#C71585;" />
	<h4 style="text-align: center;"> Table</h4>
	<div class="table-responsive">
	  <table class="table">
	    <thead>
	      <tr>
	        <th scope="col">Position</th>
	        <th scope="col">Name</th>
	        <th scope="col">Played</th>
	        <th scope="col">Won</th>
	        <th scope="col">Lost</th>
	        <th scope="col">Draws</th>
	        <th scope="col">GF</th>
	        <th scope="col">GA</th>
	        <th scope="col">GD</th>
	        <th scope="col">Points</th>
	      </tr>
	    </thead>
	    <tbody>
	    	<% @teams.each do |team| %>
	    		<% @count = @count + 1 %>
		      <tr>
		        <th scope="row"><%= @count %></th>
		        <td><%= team.name %></td>
		        <td><%= team.played %></td>
		        <td><%= team.wins %></td>
		        <td><%= team.lost %></td>
		        <td><%= team.draws %></td>
		        <td><%= team.forced %></td>
		        <td><%= team.allowed %></td>
		        <td><%= team.forced - team.allowed  %></td>
		        <td><%= team.points  %></td>
		      </tr>
	      <% end %>
	    </tbody>
	  </table>
	</div>
</div>
  


